
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>WANIX</title>
    <link rel="stylesheet" href="/styles.css">
  </head>

  <body>

    <header>
      <a href="/">
        <svg width="326" height="56" viewBox="0 0 326 56" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M33.6 0.499999H38.4C41.2 0.499999 42.8 2.1 43 5.1V32.9C43 35.8 44.5 37.3 47.6 37.5H48.5C51.3 37.5 52.9 35.9 53.1 32.7V4.99999C53.1 2 54.6 0.499999 57.7 0.499999H66.9C69.8 0.499999 71.4 2 71.6 4.99999V46.8C71.2 53 68.1 56 62.5 56H9.7C4 56 0.9 53 0.4 46.8V4.99999C0.6 2 2.1 0.499999 5.1 0.499999H14.3C17.3 0.499999 18.9 2 18.9 4.99999V32.7C19.1 35.8 20.6 37.3 23.5 37.3H24.4C27.4 37.1 29 35.6 29 32.7V5.1C29.2 2.1 30.7 0.499999 33.6 0.499999ZM87.6273 0.499999H127.327C129.527 0.499999 131.127 1.1 132.327 2.3C133.427 3.5 134.027 5.3 134.027 7.9V51.4C134.027 54.2 132.427 55.8 129.427 56H120.227C117.327 56 115.827 54.5 115.627 51.4V14.2C115.427 11.5 113.827 10 111.027 9.7H96.7273C94.1273 9.9 92.7273 11.5 92.5273 14.4V28.2C92.5273 34 95.5273 37.1 101.727 37.5H106.427C109.427 37.7 111.027 39.3 111.027 42.1V51.5C111.027 54.5 109.427 56 106.427 56H96.9273C94.1273 56 91.5273 55.6 89.2273 54.7C86.9273 53.8 85.0273 52.5 83.4273 50.8C81.8273 49.2 80.5273 47.2 79.7273 45C78.8273 42.8 78.4273 40.3 78.4273 37.5V9.7C78.4273 3.9 81.4273 0.9 87.6273 0.499999ZM201.03 0.499999C203.83 0.499999 205.43 2.1 205.63 5.1V46.8C205.23 53 202.13 56 196.43 56H185.33C182.73 56 180.43 55.6 178.43 54.8C176.33 54 174.53 52.8 173.13 51.3C171.63 49.8 170.43 48 169.63 45.8C168.83 43.6 168.43 41.2 168.43 38.4V14.4C168.43 11.6 166.93 10.1 163.93 9.7C160.83 10 159.33 11.6 159.33 14.4V51.4C159.13 54.5 157.53 56 154.53 56H145.43C142.53 56 141.03 54.5 140.83 51.4V9.7C141.23 3.6 144.23 0.499999 150.03 0.499999H173.33C179.43 0.499999 182.53 3.6 182.53 9.7V33.4C182.53 36.2 184.03 37.5 187.03 37.5C188.23 37.4 189.23 36.9 190.23 35.9C191.13 35 191.63 34.2 191.63 33.5V5.1C191.83 2.1 193.43 0.499999 196.43 0.499999H201.03ZM254.312 37.5C257.312 37.5 258.912 39 258.912 41.8V51.5C258.912 54.5 257.312 56 254.312 56H217.012C213.912 56 212.412 54.5 212.412 51.5V42.1C212.412 39.1 213.912 37.5 217.012 37.5H222.112C224.612 37.2 226.012 35.8 226.212 33.4V14.4C226.212 11.7 224.712 10.1 221.912 9.7H217.012C214.112 9.7 212.612 8.2 212.412 5.1C212.612 2.1 214.112 0.499999 217.012 0.499999H254.312C257.112 0.499999 258.712 2.1 258.912 5.1C258.712 8.2 257.312 9.7 254.712 9.7H249.112C246.212 10.1 244.812 11.6 244.812 14V33.2C244.812 35.7 246.212 37.1 249.112 37.5H254.312ZM298.632 23.4C300.032 23.4 301.332 22.9 302.432 22C303.532 21.1 304.432 20 305.232 18.7C305.932 17.4 306.432 15.9 306.832 14.3C307.232 12.7 307.432 11.2 307.432 9.7V5.1C307.432 2.1 308.932 0.499999 312.032 0.499999H321.332C324.332 0.499999 325.932 2.1 325.932 5.1V14.3C325.932 18.5 324.832 21.8 322.632 24.1C320.432 26.4 317.332 27.8 313.332 28.2C317.532 28.6 320.632 29.9 322.732 32.3C324.832 34.7 325.932 38 325.932 42.2V51.4C325.932 54.5 324.332 56 321.332 56H312.032C308.932 56 307.432 54.5 307.432 51.4V46.8C307.432 45.4 307.232 43.8 306.832 42.1C306.432 40.5 305.832 39 305.032 37.6C304.232 36.2 303.332 35.1 302.132 34.2C300.932 33.3 299.632 32.8 298.232 32.8H293.432C291.832 32.8 290.532 33.3 289.432 34.2C288.232 35.1 287.332 36.2 286.532 37.6C285.732 39 285.232 40.5 284.832 42.1C284.432 43.8 284.232 45.4 284.232 46.8V51.4C284.232 54.5 282.632 56 279.632 56H270.332C267.232 56 265.732 54.5 265.732 51.4V42.2C265.732 38 266.732 34.7 268.832 32.3C270.932 29.9 274.132 28.6 278.332 28.2C274.332 27.8 271.232 26.4 269.032 24.1C266.832 21.8 265.732 18.5 265.732 14.3V5.1C265.732 2.1 267.232 0.499999 270.332 0.499999H279.632C282.632 0.499999 284.232 2.1 284.232 5.1V9.7C284.232 12.7 284.832 15.3 286.232 17.4C287.532 19.6 289.332 21.6 291.632 23.4H298.632Z" fill="black"/>
        </svg>
      </a>
      <div class="nav-container">
        <p>Web-native Unix-like dev environment</p>
        <nav class="main-nav">
<ul>
    
    
    <li class="">
        <a href="/blog/">Blog</a>
     </li>
    
    <li class="">
        <a href="/docs/">Docs</a>
     </li>
    
    <li>
        <a href="https://github.com/tractordev/wanix" target=”_blank”>
            <img src="/img/github-mark.svg">
        </a>
     </li>
</ul></nav>
      </div>

      <hr class="thick">
      <hr class="thick">


  </header>

<div class="page">

  
  <section class="sidebar-main">
    <h1 class="page-title">Docs</h2>
    <div>
      <article id="content">
        <h2 id="getting-started">Getting started</h2>
<p>Until a bundled release or live demo is online, you&rsquo;ll need to run Wanix locally as a developer, which means you&rsquo;ll need <a href="https://go.dev/doc/install">Go installed</a> on your system. Then you can run:</p>
<pre tabindex="0"><code>make dev
</code></pre><p>This will build everything and run a dev server to access a Wanix environment on localhost in your browser. Here are a few things you can do in the environment in this early state:</p>
<h3 id="see-available-built-in-commands">See available built-in commands</h3>
<p>A number of common Unix command are available in the shell, which you can see by running <code>help</code>. Currently this does not list user or system commands found in <code>/cmd</code> or <code>/sys/cmd</code>, but you can list those using <code>ls</code>. Notable system commands include <code>build</code> and <code>micro</code>.</p>
<h3 id="work-with-the-filesystem">Work with the filesystem</h3>
<p>Use common Unix commands (<code>cd</code>, <code>ls</code>, <code>pwd</code>, &hellip;) to navigate around the filesystem. The root filesystem is <a href="internal/indexedfs">indexedfs</a>, which stores files in IndexedDB. However, by implementing the <a href="https://github.com/tractordev/toolkit-go/tree/main/engine/fs">filesystem API</a> you can create new filesystems to mount. For example, <code>/sys/dev</code> is mounted when run with the dev server using <a href="internal/httpfs">httpfs</a> to expose the project repository from the host.</p>
<p>The Wanix filesystem layout is different than Unix/Linux, so here are some relevant paths used by Wanix:</p>
<ul>
<li><code>/app</code> - For user applications.</li>
<li><code>/cmd</code> - For user commands.</li>
<li><code>/sys</code> - For Wanix system paths:
<ul>
<li><code>/sys/app</code> - For system applications.</li>
<li><code>/sys/cmd</code> - For system commands.</li>
<li><code>/sys/bin</code> - Cache for wasm binaries.</li>
<li><code>/sys/tmp</code> - For temporary files, held in-memory.</li>
<li><code>/sys/dev</code> - Read-only mount of project repo from host dev server.</li>
</ul>
</li>
</ul>
<h3 id="create-a-shell-script-command">Create a shell script command</h3>
<p>You can create commands by putting them in the <code>/cmd</code> directory. Commands can be shell scripts, wasm binaries, or buildable source directories. Shell scripts ending in <code>.sh</code> can contain commands that would run on the shell. For example, you can use <code>micro</code> to create a script to <code>echo</code> &ldquo;Hello world&rdquo;:</p>
<pre tabindex="0"><code>micro /cmd/hello.sh
</code></pre><p>Add this line to the newly created file in micro:</p>
<pre tabindex="0"><code>echo Hello world
</code></pre><p>Use <code>ctrl-s</code> to save and <code>ctrl-q</code> to quit. Now you can run <code>hello</code> in the shell.</p>
<h3 id="create-a-command-from-source-directory">Create a command from source directory</h3>
<p>You can use <code>build</code> to compile a wasm binary from any directory containing a Go main package, then move or copy it into <code>/cmd</code>. However, you can also just create a directory in <code>/cmd</code> with Go source and use it like a command. Wanix will compile and run it for you. Make a new directory under <code>/cmd</code> with <code>mkdir</code>:</p>
<pre tabindex="0"><code>mkdir /cmd/gohello
</code></pre><p>Use <code>micro</code> to create and edit a <code>main.go</code> file:</p>
<pre tabindex="0"><code>micro /cmd/gohello/main.go
</code></pre><p>Then write a small Go program:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> <span style="color:#e6db74">&#34;fmt&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;Hello world from Go&#34;</span>)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Use <code>ctrl-s</code> then <code>ctrl-q</code> to save and quit. Now if you run <code>gohello</code>, the program will be compiled and run. If you run it again, it will run the cached binary. If you modify the source and run the command again, it <em>should</em> recompile and use an updated binary, but there is currently <a href="https://github.com/tractordev/wanix/issues/66">an issue</a> waiting for you to implement this.</p>
<h3 id="create-a-web-application">Create a web application</h3>
<p>Wanix applications are simply web applications under <code>/app</code>. If you create a directory like <code>/app/webapp</code> with an <code>index.html</code>, you can then open the application with <code>open webapp</code>.</p>
<p>This will load <code>/app/webapp/index.html</code> into a full page iframe. You can get back to and toggle the console in visor mode with Control + the <code>~</code> key. Changes made to any file in <code>/app/webapp</code> will cause the frame to reload.</p>
<p>Any TypeScript source files ending in <code>.ts</code> will be converted to JavaScript when loaded in this frame. The same for any files using JSX ending in <code>.jsx</code> or <code>.tsx</code>.</p>
<h3 id="editing-the-shell-in-wanix">Editing the shell in Wanix</h3>
<p>Since source commands are compiled when launched, they are also re-compiled after being edited. The shell is one example of this. If you edit the shell source under <code>/sys/cmd/shell</code>, such as the banner found in <code>main.go</code>, reloading the page will cause the shell to be re-compiled with the new source.</p>
<h3 id="build-a-3rd-party-go-program-for-wanix">Build a 3rd party Go program for Wanix</h3>
<p>Wanix will eventually <a href="https://github.com/tractordev/wanix/issues/67">support any WASI program</a>, but for now it runs Go programs compiled with <code>GOOS=js</code> and <code>GOARCH=wasm</code>. If it compiles without a problem, it should be able to run in Wanix. However, larger programs may have dependencies that won&rsquo;t build for this target without some modification. You can see the changes we made to <code>micro</code> under <a href="external/micro">external/micro</a>, but it will really be different for every project. For now, here is an example program compiled outside Wanix brought in via the <code>/sys/dev</code> mount.</p>
<p>We use the <code>local</code> directory in checkouts of this repo for local changes not intended to be contributed. This is a good place to build a program that will be easy to copy into Wanix. For example, you can create <code>./local/example</code> with a <code>main.go</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> <span style="color:#e6db74">&#34;fmt&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;Hello world from a Go program made outside Wanix&#34;</span>)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Build it with js/wasm target, <em>outside</em> Wanix:</p>
<pre tabindex="0"><code>GOOS=js GOARCH=wasm go build -o example.wasm
</code></pre><p>Now from <em>inside</em> Wanix, you can copy the resulting file into <code>/cmd</code> from <code>/sys/dev</code>:</p>
<pre tabindex="0"><code>cp /sys/dev/local/example/example.wasm /cmd/example.wasm
</code></pre><p>You should now be able to run <code>example</code>.</p>
<h2 id="contributing">Contributing</h2>
<p>We are currently developing a roadmap to convey the direction we&rsquo;re exploring with Wanix, but this is an open and modular project that you can take and experiment with for your own purposes. If you&rsquo;re interested in how it works, take a look at our quick <a href="doc/overview.md">overview</a> and then check out the source. Most of Wanix exists in the <code>kernel</code> directory, which is a good place to start. The <code>build</code> and <code>shell</code> directories are where you&rsquo;ll find the source for those two components.</p>
<p>Take a look at our <a href="https://github.com/tractordev/wanix/issues">issues</a> to see how you can help out. You can also ask questions and participate in <a href="https://github.com/tractordev/wanix/discussions">discussions</a>, however right now most discussion takes place in our <a href="https://discord.gg/nbrwNXVvVa">Discord</a>.</p>
<h2 id="license">License</h2>
<p>MIT</p>

      </article>
    </div>
  </section>

  <aside class="sidebar">
	  <nav id="TableOfContents">
  <ul>
    <li><a href="#getting-started">Getting started</a>
      <ul>
        <li><a href="#see-available-built-in-commands">See available built-in commands</a></li>
        <li><a href="#work-with-the-filesystem">Work with the filesystem</a></li>
        <li><a href="#create-a-shell-script-command">Create a shell script command</a></li>
        <li><a href="#create-a-command-from-source-directory">Create a command from source directory</a></li>
        <li><a href="#create-a-web-application">Create a web application</a></li>
        <li><a href="#editing-the-shell-in-wanix">Editing the shell in Wanix</a></li>
        <li><a href="#build-a-3rd-party-go-program-for-wanix">Build a 3rd party Go program for Wanix</a></li>
      </ul>
    </li>
    <li><a href="#contributing">Contributing</a></li>
    <li><a href="#license">License</a></li>
  </ul>
</nav>
  </aside>

</div>

</body>
<footer>
    <a href="/admin">
        <img src="/img/command_line.svg" style="height:32px"/>
    </a>
</footer>
</html>